tool: kubectl
tags: [kubernetes, devops, containers, orchestration, security, infrastructure, pentest]

actions:
  # === CONFIGURATION & CONTEXT ===
  - title: kubectl - list contexts
    desc: |
      Lists all available cluster contexts stored in your local kubeconfig file. 
      Use this to identify which clusters, users, and namespaces are currently configured for access. 
      It is an essential first step to ensure you are targeting the correct environment before running destructive commands.
    command: "kubectl config get-contexts"

  - title: kubectl - switch context
    desc: |
      Sets the current active context for all subsequent kubectl commands. 
      This allows you to quickly jump between different clusters (e.g., from staging to production). 
      Always verify your context after switching to prevent accidental modifications to the wrong cluster.
    command: "kubectl config use-context {{context_name}}"

  - title: kubectl - view cluster information
    desc: |
      Displays the master and services addresses for the currently active cluster context. 
      This is useful for verifying that the API server is reachable and for locating core services like CoreDNS or Metrics Server. 
      Use this to troubleshoot initial connection issues with a new cluster.
    command: "kubectl cluster-info"

  # === ENUMERATION & INSPECTION ===
  - title: kubectl - list all pods
    desc: |
      Retrieves a list of all pods across every namespace in the cluster. 
      This provides a high-level overview of all running workloads and their current health status. 
      It is particularly useful for identifying unauthorized or suspicious pods during a security audit.
    command: "kubectl get pods --all-namespaces"

  - title: kubectl - describe resource
    desc: |
      Provides detailed information about a specific resource, including events, status, and configuration. 
      Use this when a pod or service is failing to start to see the underlying error messages (e.g., ImagePullBackOff or CrashLoopBackOff). 
      It reveals metadata like labels, annotations, and resource limits that are not shown in the standard list view.
    command: "kubectl describe {{resource_type|pod}} {{resource_name}} -n {{namespace|default}}"

  - title: kubectl - list API resources
    desc: |
      Prints the supported API resources on the server along with their shortnames and API groups. 
      This is useful for discovery, especially when working with Custom Resource Definitions (CRDs). 
      It helps users understand what objects they have permission to interact with within the cluster.
    command: "kubectl api-resources"

  # === TROUBLESHOOTING & INTERACTION ===
  - title: kubectl - view container logs
    desc: |
      Fetches the standard output and error logs from a specific container within a pod. 
      This is the primary method for debugging application-level issues or monitoring application behavior. 
      Adding the '-f' flag allows you to stream logs in real-time as they are generated.
    command: "kubectl logs {{pod_name}} -n {{namespace|default}} -c {{container_name|main}}"

  - title: kubectl - execute shell in pod
    desc: |
      Opens an interactive terminal session inside a running container. 
      This allows you to perform manual troubleshooting, check local files, or test network connectivity from within the cluster. 
      Ensure you have the necessary RBAC permissions for 'pods/exec' before attempting this command.
    command: "kubectl exec -it {{pod_name}} -n {{namespace|default}} -- {{shell|/bin/bash}}"

  - title: kubectl - port forwarding
    desc: |
      Forwards one or more local ports to a specific pod or service. 
      This allows you to access internal cluster services (like a database or web UI) from your local machine without exposing them to the public internet. 
      The connection remains active only as long as the terminal process is running.
    command: "kubectl port-forward {{resource_type|pod}}/{{resource_name}} {{local_port|8080}}:{{remote_port|80}} -n {{namespace|default}}"

  - title: kubectl - copy files to/from pod
    desc: |
      Facilitates the transfer of files and directories between your local filesystem and a container. 
      This is useful for extracting logs that aren't sent to stdout or for injecting configuration files for testing. 
      Note that the 'tar' binary must be present inside the container for this operation to succeed.
    command: "kubectl cp {{source_path}} {{destination_path}} -n {{namespace|default}}"

  # === MANAGEMENT & OPERATIONS ===
  - title: kubectl - apply configuration
    desc: |
      Applies a configuration change to a resource defined in a YAML or JSON file. 
      This follows a declarative approach, where Kubernetes manages the transition from the current state to the desired state. 
      It is the standard way to deploy or update applications in a repeatable and version-controlled manner.
    command: "kubectl apply -f {{file_path|manifest.yaml}}"

  - title: kubectl - scale deployment
    desc: |
      Updates the number of replicas for a specific deployment, replica set, or stateful set. 
      This is used to manually handle traffic spikes or to reduce resource consumption during off-peak hours. 
      Scaling to zero can effectively stop a workload without deleting its configuration.
    command: "kubectl scale deployment {{deployment_name}} --replicas={{count|3}} -n {{namespace|default}}"

  # === SECURITY & RBAC ===
  - title: kubectl - check authorization
    desc: |
      Checks if the current user or a specific service account can perform a given action. 
      This is an invaluable tool for testing RBAC policies and ensuring the Principle of Least Privilege is followed. 
      You can specify verbs like 'get', 'list', 'create', or 'delete' against any resource.
    command: "kubectl auth can-i {{verb|get}} {{resource|secrets}} -n {{namespace|default}}"

  - title: kubectl - view secrets
    desc: |
      Lists or retrieves the contents of Kubernetes secrets within a namespace. 
      Secrets often contain sensitive data like API keys, database passwords, or TLS certificates. 
      By default, values are base64 encoded and should be handled with extreme care to avoid data leaks.
    command: "kubectl get secret {{secret_name}} -n {{namespace|default}} -o yaml"

  # === ADVANCED TROUBLESHOOTING ===
  - title: kubectl - debug pod
    desc: |
      Creates an ephemeral container inside a running pod for troubleshooting. 
      This is useful for debugging pods that do not have a shell or necessary tools installed in their base image. 
      It allows you to inspect the file system and network of the target pod without restarting it.
    command: "kubectl debug {{pod_name}} -it --image={{debug_image|busybox}} -n {{namespace|default}}"

  - title: kubectl - resource monitoring
    desc: |
      Provides a real-time view of CPU and memory usage for pods or nodes. 
      This command requires the Metrics Server to be installed in the cluster. 
      It helps identify "noisy neighbors" or workloads that are nearing their resource limits and might be throttled.
    command: "kubectl top {{resource_type|pod}} -n {{namespace|default}}"